Index: Views/Conges/Index.cshtml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>@model IEnumerable<GestionEmploye.Models.Conge>\r\n\r\n<link href=\"@Url.Content(\"~/css/admin.css\")\" rel=\"stylesheet\" type=\"text/css\" />\r\n<link href=\"@Url.Content(\"~/css/employe.css\")\" rel=\"stylesheet\" type=\"text/css\" />\r\n<link href=\"@Url.Content(\"~/css/salary.css\")\" rel=\"stylesheet\" type=\"text/css\" />\r\n\r\n@{\r\n    ViewData[\"Title\"] = \"Index\";\r\n}\r\n\r\n<div class=\"card-body\">\r\n    <h2 class=\"card-title\">Liste des Congés</h2>\r\n    <hr class=\"sep\" />\r\n</div>\r\n\r\n<div class=\"card\" style=\"margin-top: 3.0em;\">\r\n\r\n    <div class=\"conge-list card-body\">\r\n        @if (((List<Conge>)ViewBag.Conges).Count != 0)\r\n        {\r\n            <table class=\"admin-tables table table-hover\">\r\n                <thead>\r\n                    <tr>\r\n                        <th scope=\"col\">#</th>\r\n                        <th scope=\"col\">Employé</th>\r\n                        <th scope=\"col\">Durée</th>\r\n                        <th scope=\"col\">Début congé</th>\r\n                        <th scope=\"col\">Temps restant</th>\r\n                        <th scope=\"col\">Status</th>\r\n                    </tr>\r\n                </thead>\r\n\r\n                <tbody>\r\n                    @foreach (var conge in ((List<Conge>)ViewData[\"Conges\"])!)\r\n                    {\r\n                        <tr>\r\n                            <th scope=\"row\">@conge.Id</th>\r\n                            <td class=\"employe-col\">@conge.Employe.Person.Nom @conge.Employe.Person.Prenom (@conge.EmployeId)\r\n                            </td>\r\n                            <td>@conge.Duration</td>\r\n                            <td>@conge.DemandeTime</td>\r\n                            <td>@conge.Employe.CongeRemaining</td>\r\n                            <td>\r\n                                @{\r\n                                    string button_class;\r\n                                    string button_color;\r\n                                    if (conge.Status.Contains(\"Pending\"))\r\n                                    {\r\n                                        button_class = \"btn btn-outline-warning\";\r\n                                        button_color = \"254, 202, 87\";\r\n                                    }\r\n                                    else if (conge.Status.Contains(\"Declined\"))\r\n                                    {\r\n                                        button_class = \"btn btn-outline-danger\";\r\n                                        button_color = \"255, 107, 107\";\r\n                                    }\r\n                                    else\r\n                                    {\r\n                                        button_class = \"btn btn-outline-success\";\r\n                                        button_color = \"0, 210, 211\";\r\n                                    }\r\n                                }\r\n                                <button class=\"status @(button_class)\" style=\"--status-color: @(button_color)\">\r\n                                    @if (button_class.Contains(\"warning\"))\r\n                                    {\r\n                                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\"\r\n                                class=\"status-icons bi bi-exclamation-diamond-fill\" viewBox=\"0 0 16 16\">\r\n                                            <path\r\n                                    d=\"M9.05.435c-.58-.58-1.52-.58-2.1 0L.436 6.95c-.58.58-.58 1.519 0 2.098l6.516 6.516c.58.58 1.519.58 2.098 0l6.516-6.516c.58-.58.58-1.519 0-2.098L9.05.435zM8 4c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995A.905.905 0 0 1 8 4zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z\" />\r\n                                        </svg>\r\n                                    }\r\n                                    else if (button_class.Contains(\"success\"))\r\n                                    {\r\n                                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\"\r\n                                class=\"status-icons bi bi-check-circle-fill\" viewBox=\"0 0 16 16\">\r\n                                            <path\r\n                                    d=\"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z\" />\r\n                                        </svg>\r\n                                    }\r\n                                    else\r\n                                    {\r\n                                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\"\r\n                                class=\"status-icons\" viewBox=\"0 0 512 512\">\r\n                                            <path\r\n                                    d=\"M0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256zM175 208.1L222.1 255.1L175 303C165.7 312.4 165.7 327.6 175 336.1C184.4 346.3 199.6 346.3 208.1 336.1L255.1 289.9L303 336.1C312.4 346.3 327.6 346.3 336.1 336.1C346.3 327.6 346.3 312.4 336.1 303L289.9 255.1L336.1 208.1C346.3 199.6 346.3 184.4 336.1 175C327.6 165.7 312.4 165.7 303 175L255.1 222.1L208.1 175C199.6 165.7 184.4 165.7 175 175C165.7 184.4 165.7 199.6 175 208.1V208.1z\" />\r\n                                        </svg>\r\n                                    }\r\n                                    @conge.Status\r\n                                </button>\r\n                            </td>\r\n\r\n                            @if (button_class.Contains(\"warning\"))\r\n                            {\r\n                                <td class=\"row-action\">\r\n                                    <div class=\"icon-wrapper\">\r\n                                        <form asp-action=\"Accept\" class=\"delete-form\">\r\n                                            <input type=\"hidden\" asp-for=\"@conge.Id\" name=\"Id\" />\r\n                                            <label>\r\n                                                <input type=\"submit\" value=\"Delete\" style=\"display:none\" />\r\n                                                <a class=\"icon\" style=\"--color: 16, 172, 132\">\r\n                                                    <svg class=\"svg-man\" viewBox=\"0 0 448 512\">\r\n                                                        <path\r\n                                                d=\"M438.6 105.4C451.1 117.9 451.1 138.1 438.6 150.6L182.6 406.6C170.1 419.1 149.9 419.1 137.4 406.6L9.372 278.6C-3.124 266.1-3.124 245.9 9.372 233.4C21.87 220.9 42.13 220.9 54.63 233.4L159.1 338.7L393.4 105.4C405.9 92.88 426.1 92.88 438.6 105.4H438.6z\" />\r\n                                                    </svg>\r\n                                                </a>\r\n                                            </label>\r\n                                        </form>\r\n                                        <form asp-action=\"Decline\" class=\"delete-form\">\r\n                                            <input type=\"hidden\" asp-for=\"@conge.Id\" name=\"Id\" />\r\n                                            <label>\r\n                                                <input type=\"submit\" value=\"Delete\" style=\"display:none\" />\r\n\r\n                                                <a class=\"icon\" style=\"--color: 45, 52, 54\">\r\n                                                    <svg class=\"svg-man\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 320 512\">\r\n                                                        <path\r\n                                                d=\"M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z\" />\r\n                                                    </svg>\r\n                                                </a>\r\n                                            </label>\r\n                                        </form>\r\n                                    </div>\r\n                                </td>\r\n                            }\r\n                            else\r\n                            {\r\n                                <td>\r\n                                    <div class=\"icon-wrapper\">\r\n                                        <form asp-action=\"Delete\" class=\"delete-form\">\r\n                                            <input type=\"hidden\" asp-for=\"@conge.Id\" name=\"Id\" />\r\n                                            <label>\r\n                                                <input type=\"submit\" value=\"Delete\" style=\"display:none\" />\r\n                                                <a class=\"icon\" style=\"--color: 238, 82, 83\">\r\n                                                    <svg class=\"svg-man\" viewBox=\"0 0 448 512\">\r\n                                                        <path\r\n                                                d=\"M135.2 17.69C140.6 6.848 151.7 0 163.8 0H284.2C296.3 0 307.4 6.848 312.8 17.69L320 32H416C433.7 32 448 46.33 448 64C448 81.67 433.7 96 416 96H32C14.33 96 0 81.67 0 64C0 46.33 14.33 32 32 32H128L135.2 17.69zM394.8 466.1C393.2 492.3 372.3 512 346.9 512H101.1C75.75 512 54.77 492.3 53.19 466.1L31.1 128H416L394.8 466.1z\" />\r\n                                                    </svg>\r\n                                                </a>\r\n                                            </label>\r\n                                        </form>\r\n                                    </div>\r\n                                </td>\r\n                            }\r\n                        </tr>\r\n                    }\r\n                </tbody>\r\n            </table>\r\n        }\r\n        else\r\n        {\r\n            <p>\r\n            <pre class=\"fw-bold fs-6\">Rien à afficher ici -</pre>\r\n            </p>\r\n        }\r\n    </div>\r\n</div>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Views/Conges/Index.cshtml b/Views/Conges/Index.cshtml
--- a/Views/Conges/Index.cshtml	(revision a4f29c34d6b81217cc7e201486359102b267c8d1)
+++ b/Views/Conges/Index.cshtml	(date 1653601316758)
@@ -7,12 +7,12 @@
 @{
     ViewData["Title"] = "Index";
 }
+<partial name="_Demande.cshtml"/>
 
 <div class="card-body">
     <h2 class="card-title">Liste des Congés</h2>
     <hr class="sep" />
 </div>
-
 <div class="card" style="margin-top: 3.0em;">
 
     <div class="conge-list card-body">
Index: Models/Conge.cs
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>using System.ComponentModel;\r\nusing System.ComponentModel.DataAnnotations;\r\n\r\nnamespace GestionEmploye.Models\r\n{\r\n    public class Conge\r\n    {\r\n        public int Id { get; set; }\r\n\r\n        [Required]\r\n        [DataType(DataType.Date)]\r\n        public DateTime Date { get; set; }\r\n        \r\n        [Required]\r\n        [DataType(DataType.DateTime)]\r\n        public DateTime DemandeTime { get; set; }\r\n\r\n        [Range(1,30)]\r\n        [Required]\r\n        public int Duration { get; set; }\r\n\r\n        [DefaultValue(0)]\r\n        [RegularExpression(\"Pending|Accepted|Declined\", ErrorMessage = \"Invalid Status\")]\r\n        public string Status { get; set; }\r\n\r\n        [Required]\r\n        public int EmployeId {get; set;}\r\n\r\n        public Employe Employe {get; set;}\r\n\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Models/Conge.cs b/Models/Conge.cs
--- a/Models/Conge.cs	(revision a4f29c34d6b81217cc7e201486359102b267c8d1)
+++ b/Models/Conge.cs	(date 1653601316747)
@@ -17,6 +17,7 @@
 
         [Range(1,30)]
         [Required]
+        [Display(Name = "Durée")]
         public int Duration { get; set; }
 
         [DefaultValue(0)]
Index: Views/Employees/Details.cshtml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>@model GestionEmploye.Models.Employe\r\n@using System.Linq;\r\n\r\n\r\n@{\r\n    ViewData[\"Title\"] = \"Details\";\r\n}\r\n\r\n<link href=\"@Url.Content(\"~/css/admin.css\")\" rel=\"stylesheet\" type=\"text/css\"/>\r\n<link href=\"@Url.Content(\"~/css/salary.css\")\" rel=\"stylesheet\" type=\"text/css\"/>\r\n<link href=\"@Url.Content(\"~/css/employe.css\")\" rel=\"stylesheet\" type=\"text/css\"/>\r\n\r\n\r\n@{\r\n    ViewData[\"Title\"] = \"Index\";\r\n}\r\n\r\n<div>\r\n    <a asp-action=\"Edit\" asp-route-id=\"@Model?.Id\">Edit</a> |\r\n    <a asp-action=\"Index\">Back to List</a>\r\n</div>\r\n\r\n<div class=\"card-body to-left\">\r\n    <h2 class=\"card-title title-to-left\">À propos de <strong>@ViewBag.Employee.Person.Nom @ViewBag.Employee.Person.Prenom</strong></h2>\r\n    <hr class=\"sep\"/>\r\n</div>\r\n\r\n<div>\r\n    <div class=\"row g-3\">\r\n        <div class=\"col-6\">\r\n            <div class=\"card-wrapper\" style=\"background-color: white\">\r\n                <div class=\"p-3 font-monospace\">\r\n                    <span class=\"card-title title-to-left fw-bold\">Id° </span>\r\n                    <svg height=\"16\" width=\"16\" style=\"fill: var(--primary-color)\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 256 512\">\r\n                        <path d=\"M64 448c-8.188 0-16.38-3.125-22.62-9.375c-12.5-12.5-12.5-32.75 0-45.25L178.8 256L41.38 118.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0l160 160c12.5 12.5 12.5 32.75 0 45.25l-160 160C80.38 444.9 72.19 448 64 448z\"/>\r\n                    </svg>\r\n                    @ViewBag.Employee.Person.EmployeId\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"col-6\">\r\n            <div class=\"card-wrapper\" style=\"background-color: white\">\r\n                <div class=\"p-3 font-monospace\">\r\n                    <span class=\"card-title title-to-left fw-bold\">E-mail </span>\r\n                    <svg height=\"16\" width=\"16\" style=\"fill: var(--primary-color)\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 256 512\">\r\n                        <path d=\"M64 448c-8.188 0-16.38-3.125-22.62-9.375c-12.5-12.5-12.5-32.75 0-45.25L178.8 256L41.38 118.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0l160 160c12.5 12.5 12.5 32.75 0 45.25l-160 160C80.38 444.9 72.19 448 64 448z\"/>\r\n                    </svg>\r\n                    @ViewBag.Employee.Person.Email\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"col-6\">\r\n            <div class=\"card-wrapper\" style=\"background-color: white\">\r\n                <div class=\"p-3 font-monospace\">\r\n                    <span class=\"card-title title-to-left fw-bold\">Quota sur congés </span>\r\n                    <svg height=\"16\" width=\"16\" style=\"fill: var(--primary-color)\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 256 512\">\r\n                        <path d=\"M64 448c-8.188 0-16.38-3.125-22.62-9.375c-12.5-12.5-12.5-32.75 0-45.25L178.8 256L41.38 118.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0l160 160c12.5 12.5 12.5 32.75 0 45.25l-160 160C80.38 444.9 72.19 448 64 448z\"/>\r\n                    </svg>\r\n                    @ViewBag.Employee.CongeRemaining\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"col-6\">\r\n            <div class=\"card-wrapper\" style=\"background-color: white\">\r\n                <div class=\"p-3 font-monospace\">\r\n                    <span class=\"card-title title-to-left fw-bold\">Montant disponible </span>\r\n                    <svg height=\"16\" width=\"16\" style=\"fill: var(--primary-color)\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 256 512\">\r\n                        <path d=\"M64 448c-8.188 0-16.38-3.125-22.62-9.375c-12.5-12.5-12.5-32.75 0-45.25L178.8 256L41.38 118.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0l160 160c12.5 12.5 12.5 32.75 0 45.25l-160 160C80.38 444.9 72.19 448 64 448z\"/>\r\n                    </svg>\r\n                    @ViewBag.Employee.CurrentSalary\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div class=\"card\" style=\"margin-top: 3.0em;\">\r\n\r\n    <div class=\"card-body to-left\">\r\n        <h2 class=\"card-title title-to-left\"># Historique des congés pour <strong>@ViewBag.Employee.Person.Nom @ViewBag.Employee.Person.Prenom</strong></h2>\r\n        <hr class=\"sep\"/>\r\n    </div>\r\n    <div class=\"conge-list card-body\">\r\n        @if (ViewBag.Employee.Conges.Count != 0)\r\n        {\r\n            <table class=\"admin-tables table table-hover\">\r\n                <thead>\r\n                <tr>\r\n                    <th scope=\"col\">#</th>\r\n                    <th scope=\"col\">Durée</th>\r\n                    <th scope=\"col\">Début congé</th>\r\n                    <th scope=\"col\">Temps restant</th>\r\n                    <th scope=\"col\">Status</th>\r\n                </tr>\r\n                </thead>\r\n\r\n                <tbody>\r\n                @foreach (Conge conge in (ViewBag.Employee.Conges))\r\n                {\r\n                    <tr>\r\n                        <th scope=\"row\">@conge.Id</th>\r\n                        <td>@conge.Duration</td>\r\n                        <td>@conge.DemandeTime</td>\r\n                        <td>@conge.Employe.CongeRemaining</td>\r\n                        <td>\r\n                            @{\r\n                                string button_class;\r\n                                string button_color;\r\n                                if (conge.Status.Contains(\"Pending\"))\r\n                                {\r\n                                    button_class = \"btn btn-outline-warning\";\r\n                                    button_color = \"254, 202, 87\";\r\n                                }\r\n                                else if (conge.Status.Contains(\"Declined\"))\r\n                                {\r\n                                    button_class = \"btn btn-outline-danger\";\r\n                                    button_color = \"255, 107, 107\";\r\n                                }\r\n                                else\r\n                                {\r\n                                    button_class = \"btn btn-outline-success\";\r\n                                    button_color = \"0, 210, 211\";\r\n                                }\r\n                            }\r\n                            <button class=\"status @(button_class)\" style=\"--status-color: @(button_color)\">\r\n                                @if (button_class.Contains(\"warning\"))\r\n                                {\r\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\"\r\n                                         class=\"status-icons bi bi-exclamation-diamond-fill\" viewBox=\"0 0 16 16\">\r\n                                        <path\r\n                                            d=\"M9.05.435c-.58-.58-1.52-.58-2.1 0L.436 6.95c-.58.58-.58 1.519 0 2.098l6.516 6.516c.58.58 1.519.58 2.098 0l6.516-6.516c.58-.58.58-1.519 0-2.098L9.05.435zM8 4c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995A.905.905 0 0 1 8 4zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z\"/>\r\n                                    </svg>\r\n                                }\r\n                                else if (button_class.Contains(\"success\"))\r\n                                {\r\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\"\r\n                                         class=\"status-icons bi bi-check-circle-fill\" viewBox=\"0 0 16 16\">\r\n                                        <path\r\n                                            d=\"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z\"/>\r\n                                    </svg>\r\n                                }\r\n                                else\r\n                                {\r\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\"\r\n                                         class=\"status-icons\" viewBox=\"0 0 512 512\">\r\n                                        <path\r\n                                            d=\"M0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256zM175 208.1L222.1 255.1L175 303C165.7 312.4 165.7 327.6 175 336.1C184.4 346.3 199.6 346.3 208.1 336.1L255.1 289.9L303 336.1C312.4 346.3 327.6 346.3 336.1 336.1C346.3 327.6 346.3 312.4 336.1 303L289.9 255.1L336.1 208.1C346.3 199.6 346.3 184.4 336.1 175C327.6 165.7 312.4 165.7 303 175L255.1 222.1L208.1 175C199.6 165.7 184.4 165.7 175 175C165.7 184.4 165.7 199.6 175 208.1V208.1z\"/>\r\n                                    </svg>\r\n                                }\r\n                                @conge.Status\r\n                            </button>\r\n                        </td>\r\n\r\n                        @if (button_class.Contains(\"warning\"))\r\n                        {\r\n                            <td class=\"row-action\">\r\n                                <div class=\"icon-wrapper\">\r\n                                    <form asp-controller=\"Conges\" asp-action=\"Accept\" class=\"delete-form\">\r\n                                        <input type=\"hidden\" asp-for=\"@conge.Id\" name=\"Id\"/>\r\n                                        <label>\r\n                                            <input type=\"submit\" value=\"Delete\" style=\"display:none\"/>\r\n                                            <a class=\"icon\" style=\"--color: 16, 172, 132\">\r\n                                                <svg class=\"svg-man\" viewBox=\"0 0 448 512\">\r\n                                                    <path\r\n                                                        d=\"M438.6 105.4C451.1 117.9 451.1 138.1 438.6 150.6L182.6 406.6C170.1 419.1 149.9 419.1 137.4 406.6L9.372 278.6C-3.124 266.1-3.124 245.9 9.372 233.4C21.87 220.9 42.13 220.9 54.63 233.4L159.1 338.7L393.4 105.4C405.9 92.88 426.1 92.88 438.6 105.4H438.6z\"/>\r\n                                                </svg>\r\n                                            </a>\r\n                                        </label>\r\n                                    </form>\r\n                                    <form asp-controller=\"Conges\" asp-action=\"Decline\" class=\"delete-form\">\r\n                                        <input type=\"hidden\" asp-for=\"@conge.Id\" name=\"Id\"/>\r\n                                        <label>\r\n                                            <input type=\"submit\" value=\"Delete\" style=\"display:none\"/>\r\n\r\n                                            <a class=\"icon\" style=\"--color: 45, 52, 54\">\r\n                                                <svg class=\"svg-man\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 320 512\">\r\n                                                    <path\r\n                                                        d=\"M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z\"/>\r\n                                                </svg>\r\n                                            </a>\r\n                                        </label>\r\n                                    </form>\r\n                                </div>\r\n                            </td>\r\n                        }\r\n                        else\r\n                        {\r\n                            <td>\r\n                                <div class=\"icon-wrapper\">\r\n                                    <form asp-action=\"Delete\" class=\"delete-form\">\r\n                                        <input type=\"hidden\" asp-for=\"@conge.Id\" name=\"Id\"/>\r\n                                        <label>\r\n                                            <input type=\"submit\" value=\"Delete\" style=\"display:none\"/>\r\n                                            <a class=\"icon\" style=\"--color: 238, 82, 83\">\r\n                                                <svg class=\"svg-man\" viewBox=\"0 0 448 512\">\r\n                                                    <path\r\n                                                        d=\"M135.2 17.69C140.6 6.848 151.7 0 163.8 0H284.2C296.3 0 307.4 6.848 312.8 17.69L320 32H416C433.7 32 448 46.33 448 64C448 81.67 433.7 96 416 96H32C14.33 96 0 81.67 0 64C0 46.33 14.33 32 32 32H128L135.2 17.69zM394.8 466.1C393.2 492.3 372.3 512 346.9 512H101.1C75.75 512 54.77 492.3 53.19 466.1L31.1 128H416L394.8 466.1z\"/>\r\n                                                </svg>\r\n                                            </a>\r\n                                        </label>\r\n                                    </form>\r\n                                </div>\r\n                            </td>\r\n                        }\r\n                    </tr>\r\n                }\r\n                </tbody>\r\n            </table>\r\n        }\r\n        else\r\n        {\r\n            <p>\r\n                <pre class=\"fw-bold fs-6\">Rien à afficher ici -</pre>\r\n            </p>\r\n        }\r\n    </div>\r\n</div>\r\n\r\n<div class=\"list card\">\r\n    \r\n    <div class=\"card-body to-left\">\r\n        <h2 class=\"card-title title-to-left\"># Historique des paiements pour <strong>@ViewBag.Employee.Person.Nom @ViewBag.Employee.Person.Prenom</strong></h2>\r\n        <hr class=\"sep\"/>\r\n    </div>\r\n    <div class=\"paie-list card-body\">\r\n\r\n        <!-- TODO -->\r\n        @if (ViewBag.Employee.Salaries.Count != 0)\r\n        {\r\n            <table class=\"admin-tables table table-hover\">\r\n                <thead>\r\n                <tr>\r\n                    <th scope=\"col\">#</th>\r\n                    <th scope=\"col\">Montant</th>\r\n                    <th scope=\"col\">Mois</th>\r\n                    <th scope=\"col\">Année</th>\r\n                    <th scope=\"col\">Status</th>\r\n                </tr>\r\n                </thead>\r\n\r\n                <tbody>\r\n                @foreach (Salary salary in (ViewBag.Employee.Salaries))\r\n                {\r\n                    <tr>\r\n                        <th scope=\"row\">@salary.Id</th>\r\n                        <td>@salary.Amount</td>\r\n                        <td>@salary.Month.Month</td>\r\n                        <td>@salary.Month.Year</td>\r\n                        <td>\r\n                            <button class=\"status @(salary.Status.Contains(\"Pending\") ? \"btn btn-outline-warning\" : \"btn btn-outline-success\")\"\r\n                                    style=\"--status-color: @(salary.Status.Contains(\"Pending\") ? \"254, 202, 87\" : \"0, 210, 211\")\">\r\n                                @if (salary.Status.Contains(\"Pending\"))\r\n                                {\r\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"status-icons bi bi-exclamation-diamond-fill\" viewBox=\"0 0 16 16\">\r\n                                        <path d=\"M9.05.435c-.58-.58-1.52-.58-2.1 0L.436 6.95c-.58.58-.58 1.519 0 2.098l6.516 6.516c.58.58 1.519.58 2.098 0l6.516-6.516c.58-.58.58-1.519 0-2.098L9.05.435zM8 4c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995A.905.905 0 0 1 8 4zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z\"/>\r\n                                    </svg>\r\n                                }\r\n                                else\r\n                                {\r\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"status-icons bi bi-check-circle-fill\" viewBox=\"0 0 16 16\">\r\n                                        <path d=\"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z\"/>\r\n                                    </svg>\r\n                                }\r\n                                @salary.Status\r\n                            </button>\r\n                        </td>\r\n                        <td class=\"row-action\">\r\n                            <div class=\"icon-wrapper\">\r\n                                <form asp-controller=\"Salaries\" asp-action=\"Paid\" class=\"delete-form\" style='@(salary.Status == \"Pending\" ? \"\" : \"opacity:0;pointer-events: none;\")'>\r\n                                    <input type=\"hidden\" asp-for=\"@salary.Id\" name=\"Id\"/>\r\n                                    <label>\r\n                                        <input type=\"submit\" value=\"Delete\" style=\"display:none\"/>\r\n                                        <a class=\"icon\" style=\"--color: 16, 172, 132\">\r\n                                            <svg class=\"svg-man\" viewBox=\"0 0 448 512\">\r\n                                                <path\r\n                                                    d=\"M438.6 105.4C451.1 117.9 451.1 138.1 438.6 150.6L182.6 406.6C170.1 419.1 149.9 419.1 137.4 406.6L9.372 278.6C-3.124 266.1-3.124 245.9 9.372 233.4C21.87 220.9 42.13 220.9 54.63 233.4L159.1 338.7L393.4 105.4C405.9 92.88 426.1 92.88 438.6 105.4H438.6z\"/>\r\n                                            </svg>\r\n                                        </a>\r\n                                    </label>\r\n                                </form>\r\n                                <form asp-controller=\"Salaries\" asp-action=\"Delete\" class=\"delete-form\">\r\n                                    <input type=\"hidden\" asp-for=\"@salary.Id\" name=\"Id\"/>\r\n                                    <label>\r\n                                        <input type=\"submit\" value=\"Delete\" style=\"display:none\"/>\r\n                                        <a class=\"icon\" style=\"--color: 238, 82, 83\">\r\n                                            <svg class=\"svg-man\" viewBox=\"0 0 448 512\">\r\n                                                <path\r\n                                                    d=\"M135.2 17.69C140.6 6.848 151.7 0 163.8 0H284.2C296.3 0 307.4 6.848 312.8 17.69L320 32H416C433.7 32 448 46.33 448 64C448 81.67 433.7 96 416 96H32C14.33 96 0 81.67 0 64C0 46.33 14.33 32 32 32H128L135.2 17.69zM394.8 466.1C393.2 492.3 372.3 512 346.9 512H101.1C75.75 512 54.77 492.3 53.19 466.1L31.1 128H416L394.8 466.1z\"/>\r\n                                            </svg>\r\n                                        </a>\r\n                                    </label>\r\n                                </form>\r\n                            </div>\r\n                        </td>\r\n                    </tr>\r\n                }\r\n                </tbody>\r\n            </table>\r\n        }\r\n        else\r\n        {\r\n            <p>\r\n                <pre class=\"fw-bold fs-5\">Rien à afficher ici -</pre>\r\n            </p>\r\n        }\r\n    </div>\r\n</div>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Views/Employees/Details.cshtml b/Views/Employees/Details.cshtml
--- a/Views/Employees/Details.cshtml	(revision a4f29c34d6b81217cc7e201486359102b267c8d1)
+++ b/Views/Employees/Details.cshtml	(date 1653601316767)
@@ -34,7 +34,7 @@
                     <svg height="16" width="16" style="fill: var(--primary-color)" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512">
                         <path d="M64 448c-8.188 0-16.38-3.125-22.62-9.375c-12.5-12.5-12.5-32.75 0-45.25L178.8 256L41.38 118.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0l160 160c12.5 12.5 12.5 32.75 0 45.25l-160 160C80.38 444.9 72.19 448 64 448z"/>
                     </svg>
-                    @ViewBag.Employee.Person.EmployeId
+                    @ViewBag.Employee.Person.Id
                 </div>
             </div>
         </div>
@@ -56,25 +56,25 @@
                     <svg height="16" width="16" style="fill: var(--primary-color)" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512">
                         <path d="M64 448c-8.188 0-16.38-3.125-22.62-9.375c-12.5-12.5-12.5-32.75 0-45.25L178.8 256L41.38 118.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0l160 160c12.5 12.5 12.5 32.75 0 45.25l-160 160C80.38 444.9 72.19 448 64 448z"/>
                     </svg>
-                    @ViewBag.Employee.CongeRemaining
+                    @ViewBag.Employee.CongeRemaining jours
                 </div>
             </div>
         </div>
         <div class="col-6">
             <div class="card-wrapper" style="background-color: white">
                 <div class="p-3 font-monospace">
-                    <span class="card-title title-to-left fw-bold">Montant disponible </span>
+                    <span class="card-title title-to-left fw-bold">Salaire </span>
                     <svg height="16" width="16" style="fill: var(--primary-color)" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512">
                         <path d="M64 448c-8.188 0-16.38-3.125-22.62-9.375c-12.5-12.5-12.5-32.75 0-45.25L178.8 256L41.38 118.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0l160 160c12.5 12.5 12.5 32.75 0 45.25l-160 160C80.38 444.9 72.19 448 64 448z"/>
                     </svg>
-                    @ViewBag.Employee.CurrentSalary
+                    @ViewBag.Employee.CurrentSalary DH
                 </div>
             </div>
         </div>
     </div>
 </div>
 
-<div class="card" style="margin-top: 3.0em;">
+<div class="card" style="margin-top: 3.0em;" id="lst">
 
     <div class="card-body to-left">
         <h2 class="card-title title-to-left"># Historique des congés pour <strong>@ViewBag.Employee.Person.Nom @ViewBag.Employee.Person.Prenom</strong></h2>
Index: Views/Employees/Index.cshtml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>@model IEnumerable<GestionEmploye.Models.Employe>\r\n\r\n<link href=\"@Url.Content(\"~/css/admin.css\")\" rel=\"stylesheet\" type=\"text/css\"/>\r\n<link href=\"@Url.Content(\"~/css/salary.css\")\" rel=\"stylesheet\" type=\"text/css\"/>\r\n<link href=\"@Url.Content(\"~/css/employe.css\")\" rel=\"stylesheet\" type=\"text/css\"/>\r\n\r\n@{\r\n    ViewData[\"Title\"] = \"Index\";\r\n}\r\n\r\n<div class=\"card-body\">\r\n    <h2 class=\"card-title\">Liste des Employés</h2>\r\n    <hr class=\"sep\"/>\r\n</div>\r\n\r\n<p>\r\n    <a asp-action=\"Create\" class=\"btn btn-outline-primary\">Ajouter un employe</a>\r\n</p>\r\n\r\n<div class=\"list card\">\r\n    <div class=\"employe-list card-body\">\r\n        @if (((List<Employe>) ViewBag.Employees).Count != 0)\r\n        {\r\n            <table class=\"admin-tables table table-hover\">\r\n                <thead>\r\n                <tr>\r\n                    <th scope=\"col\">#</th>\r\n                    <th scope=\"col\">Nom</th>\r\n                    <th scope=\"col\">Prenom</th>\r\n                    <th scope=\"col\">E-mail</th>\r\n                    <th scope=\"col\">Durée congé</th>\r\n                    <th scope=\"col\">Montant salaire</th>\r\n                </tr>\r\n                </thead>\r\n\r\n                <tbody>\r\n                @foreach (var employe in (List<Employe>) ViewData[\"Employees\"])\r\n                {\r\n                    <tr>\r\n                        <th scope=\"row\">@employe.PersonId</th>\r\n                        <td>@employe.Person.Nom</td>\r\n                        <td>@employe.Person.Prenom</td>\r\n                        <td>@employe.Person.Email</td>\r\n                        <td>@employe.CongeRemaining</td>\r\n                        <td>@employe.CurrentSalary</td>\r\n                        <td>\r\n                            <div class=\"icon-wrapper\">\r\n                                <a asp-action=\"Edit\" asp-route-id=\"@employe.Id\" class=\"icon\" style=\"--color: 16, 172, 132\">\r\n                                    <svg class=\"svg-man\" viewBox=\"0 0 512 512\">\r\n                                        <path d=\"M362.7 19.32C387.7-5.678 428.3-5.678 453.3 19.32L492.7 58.75C517.7 83.74 517.7 124.3 492.7 149.3L444.3 197.7L314.3 67.72L362.7 19.32zM421.7 220.3L188.5 453.4C178.1 463.8 165.2 471.5 151.1 475.6L30.77 511C22.35 513.5 13.24 511.2 7.03 504.1C.8198 498.8-1.502 489.7 .976 481.2L36.37 360.9C40.53 346.8 48.16 333.9 58.57 323.5L291.7 90.34L421.7 220.3z\"/>\r\n                                    </svg>\r\n                                </a>\r\n                                <a asp-action=\"Details\" asp-route-id=\"@employe.Id\" class=\"icon\">\r\n                                    <svg class=\"svg-man\" viewBox=\"0 0 448 512\">\r\n                                        <path d=\"M224 256c70.7 0 128-57.31 128-128s-57.3-128-128-128C153.3 0 96 57.31 96 128S153.3 256 224 256zM274.7 304H173.3C77.61 304 0 381.6 0 477.3c0 19.14 15.52 34.67 34.66 34.67h378.7C432.5 512 448 496.5 448 477.3C448 381.6 370.4 304 274.7 304z\"/>\r\n                                    </svg>\r\n                                </a>\r\n                                <form asp-action=\"Delete\" class=\"delete-form\">\r\n                                    <label>\r\n                                        <input type=\"submit\" value=\"\" style=\"display: none;\">\r\n                                        <a class=\"icon\" style=\"--color: 238, 82, 83\">\r\n                                            <svg class=\"svg-man\" viewBox=\"0 0 448 512\">\r\n                                                <path\r\n                                                    d=\"M135.2 17.69C140.6 6.848 151.7 0 163.8 0H284.2C296.3 0 307.4 6.848 312.8 17.69L320 32H416C433.7 32 448 46.33 448 64C448 81.67 433.7 96 416 96H32C14.33 96 0 81.67 0 64C0 46.33 14.33 32 32 32H128L135.2 17.69zM394.8 466.1C393.2 492.3 372.3 512 346.9 512H101.1C75.75 512 54.77 492.3 53.19 466.1L31.1 128H416L394.8 466.1z\"/>\r\n                                            </svg>\r\n                                        </a>\r\n                                    </label>\r\n                                    <input type=\"hidden\" asp-for=\"@employe.Id\" name=\"Id\"/>\r\n\r\n                                </form>\r\n                            </div>\r\n                        </td>\r\n                    </tr>\r\n                }\r\n                </tbody>\r\n            </table>\r\n        }\r\n        else\r\n        {\r\n            <p>\r\n                <pre class=\"fw-bold fs-5\">Rien à afficher ici -</pre>\r\n            </p>\r\n        }\r\n    </div>\r\n</div>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Views/Employees/Index.cshtml b/Views/Employees/Index.cshtml
--- a/Views/Employees/Index.cshtml	(revision a4f29c34d6b81217cc7e201486359102b267c8d1)
+++ b/Views/Employees/Index.cshtml	(date 1653601316773)
@@ -37,7 +37,7 @@
                 @foreach (var employe in (List<Employe>) ViewData["Employees"])
                 {
                     <tr>
-                        <th scope="row">@employe.PersonId</th>
+                        <th scope="row">@employe.Person.Id</th>
                         <td>@employe.Person.Nom</td>
                         <td>@employe.Person.Prenom</td>
                         <td>@employe.Person.Email</td>
Index: Controllers/SalariesController.cs
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>using Microsoft.AspNetCore.Mvc;\r\nusing Microsoft.AspNetCore.Mvc.Rendering;\r\nusing Microsoft.EntityFrameworkCore;\r\nusing GestionEmploye.Models;\r\n\r\nnamespace GestionEmploye.Controllers\r\n{\r\n    public class SalariesController : Controller\r\n    {\r\n        private readonly AppContext _context;\r\n\r\n        public SalariesController(AppContext context)\r\n        {\r\n            _context = context;\r\n        }\r\n\r\n        public async Task<IActionResult> Index(int dupErr = 0)\r\n        {\r\n            var employees = \r\n                _context.Employe\r\n                    .Select(s => new \r\n                    { \r\n                    Id = s.Id,\r\n                    FullName = $\"{s.Id} - {s.Person.Nom} {s.Person.Prenom} ({s.CurrentSalary} DH)\"\r\n                    })\r\n                    .ToList();\r\n\r\n            ViewData[\"EmployeId\"] = new SelectList(employees, \"Id\", \"FullName\");\r\n            var status = new [] { new {Name = \"En cours\" , Value = \"Pending\"},new {Name = \"Payé\" , Value = \"Paid\"}}.ToList();\r\n            ViewData[\"StatusList\"] = new SelectList(status, \"Value\", \"Name\");\r\n            ViewData[\"Salaries\"] = await _context.Salary.Include(m => m.Employe.Person).ToListAsync();\r\n            if(dupErr == 1){\r\n                ModelState.AddModelError(string.Empty,\"Paiement déjà effectué\");\r\n            }\r\n            return View();\r\n        }\r\n\r\n        \r\n\r\n        public IActionResult Create()\r\n        {\r\n            ViewData[\"EmployeId\"] = new SelectList(_context.Employe, \"Id\", \"Id\");\r\n            return View();\r\n        }\r\n\r\n        [HttpPost]\r\n        public async Task<IActionResult> Create(Salary salary)\r\n        {\r\n            salary.Amount = _context.Employe.Find(salary.EmployeId).CurrentSalary;\r\n            if (await _context.Salary.AnyAsync(m => m.Month == salary.Month && m.EmployeId == salary.EmployeId)){\r\n                return Redirect(\"/salaries?dupErr=1\");\r\n            }\r\n\r\n            if (ModelState.IsValid)\r\n            {\r\n                _context.Add(salary);\r\n                await _context.SaveChangesAsync();\r\n            }\r\n            return RedirectToAction(nameof(Index));\r\n        }\r\n\r\n        \r\n        \r\n        [HttpPost]\r\n        public async Task<IActionResult> Paid(int id)\r\n        {\r\n            var salary = await _context.Salary.FindAsync(id);\r\n            if(salary != null){\r\n                salary.Status = \"Paid\";\r\n                _context.Update(salary);\r\n                await _context.SaveChangesAsync();\r\n            }\r\n            return Redirect(\"/salaries#lst\");\r\n        }\r\n        \r\n        [HttpPost]\r\n        public async Task<IActionResult> Delete(int id)\r\n        {\r\n            \r\n            var salary = await _context.Salary.FindAsync(id);\r\n            if (salary != null)\r\n            {\r\n                _context.Salary.Remove(salary);\r\n            }\r\n\r\n            await _context.SaveChangesAsync();\r\n            return RedirectToAction(nameof(Index));\r\n        }\r\n\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Controllers/SalariesController.cs b/Controllers/SalariesController.cs
--- a/Controllers/SalariesController.cs	(revision a4f29c34d6b81217cc7e201486359102b267c8d1)
+++ b/Controllers/SalariesController.cs	(date 1653601316742)
@@ -70,7 +70,8 @@
                 _context.Update(salary);
                 await _context.SaveChangesAsync();
             }
-            return Redirect("/salaries#lst");
+            
+            return Redirect(Request.Headers.Referer+"#lst");
         }
         
         [HttpPost]
@@ -84,7 +85,7 @@
             }
 
             await _context.SaveChangesAsync();
-            return RedirectToAction(nameof(Index));
+            return Redirect(Request.Headers.Referer+"#lst");
         }
 
     }
Index: Controllers/AuthController.cs
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>using System;\r\nusing System.Collections.Generic;\r\nusing System.Linq;\r\nusing System.Threading.Tasks;\r\nusing Microsoft.AspNetCore.Mvc;\r\nusing Microsoft.AspNetCore.Mvc.Rendering;\r\nusing Microsoft.EntityFrameworkCore;\r\nusing GestionEmploye.Models;\r\n\r\nnamespace GestionEmploye.Controllers\r\n{\r\n    public class AuthController : Controller\r\n    {\r\n        private readonly AppContext _context;\r\n\r\n        public AuthController(AppContext context)\r\n        {\r\n            _context = context;\r\n        }\r\n\r\n\r\n        [HttpGet(\"/login/{*type}\")]\r\n        public IActionResult Login(string type)\r\n        {\r\n            return View();\r\n        }\r\n\r\n        [HttpPost(\"/login/{*type}\")]\r\n        public async Task<IActionResult> Login(string type, [Bind(\"Email,Password\")] Person person)\r\n        {\r\n            if (type == \"admin\")\r\n            {\r\n                var result = await _context.Admin.Include(nameof(Admin.Person)).FirstOrDefaultAsync(m => m.Person.Email == person.Email);\r\n                if (result == null)\r\n                {\r\n                    ModelState.AddModelError(\"Email\", \"Email not found!\");\r\n                    return View();\r\n                }\r\n                if (result.Person.Password != person.Password)\r\n                {\r\n                    ModelState.AddModelError(\"Password\", \"Wrong password!\");\r\n                    return View();\r\n                }\r\n                HttpContext.Session.SetInt32(\"PersonId\", result.PersonId);\r\n                HttpContext.Session.SetString(\"Nom\", result.Person.Nom);\r\n                HttpContext.Session.SetString(\"Prenom\", result.Person.Prenom);\r\n                HttpContext.Session.SetInt32(\"Admin\", 1);\r\n                Redirect(\"/\");\r\n            }\r\n\r\n            var result1 = await _context.Employe.Include(nameof(Employe.Person)).FirstOrDefaultAsync(m => m.Person.Email == person.Email);\r\n            if (result1 == null)\r\n            {\r\n                ModelState.AddModelError(\"Email\", \"Email not found!\");\r\n                return View();\r\n            }\r\n            if (result1.Person.Password != person.Password)\r\n            {\r\n                ModelState.AddModelError(\"Password\", \"Wrong password!\");\r\n                return View();\r\n            }\r\n            HttpContext.Session.SetInt32(\"PersonId\", result1.PersonId);\r\n            HttpContext.Session.SetString(\"Nom\", result1.Person.Nom);\r\n            HttpContext.Session.SetString(\"Prenom\", result1.Person.Prenom);\r\n            HttpContext.Session.SetInt32(\"Admin\", 0);\r\n            return Redirect(\"/\");\r\n        }\r\n\r\n\r\n        // todo: remove this after finishing debuging\r\n        //      ||\r\n        //      ||\r\n        //     \\  /\r\n        //      \\/\r\n\r\n\r\n        // GET: Auth\r\n        public async Task<IActionResult> Index()\r\n        {\r\n            var appContext = _context.Person.Include(p => p.Admin).Include(p => p.Employe);\r\n            return View(await appContext.ToListAsync());\r\n        }\r\n\r\n        // GET: Auth/Details/5\r\n        public async Task<IActionResult> Details(int? id)\r\n        {\r\n            if (id == null || _context.Person == null)\r\n            {\r\n                return NotFound();\r\n            }\r\n\r\n            var person = await _context.Person\r\n                .Include(p => p.Admin)\r\n                .Include(p => p.Employe)\r\n                .FirstOrDefaultAsync(m => m.Id == id);\r\n            if (person == null)\r\n            {\r\n                return NotFound();\r\n            }\r\n\r\n            return View(person);\r\n        }\r\n\r\n        // GET: Auth/Create\r\n        public IActionResult Create()\r\n        {\r\n            ViewData[\"EmployeId\"] = new SelectList(_context.Admin, \"Id\", \"Id\");\r\n            ViewData[\"EmployeId\"] = new SelectList(_context.Employe, \"Id\", \"Id\");\r\n            return View();\r\n        }\r\n\r\n        // POST: Auth/Create\r\n        // To protect from overposting attacks, enable the specific properties you want to bind to.\r\n        // For more details, see http://go.microsoft.com/fwlink/?LinkId=317598.\r\n        [HttpPost]\r\n        [ValidateAntiForgeryToken]\r\n        public async Task<IActionResult> Create([Bind(\"Id,Nom,Prenom,Email,Password,EmployeId,AdminId\")] Person person)\r\n        {\r\n            if (ModelState.IsValid)\r\n            {\r\n                _context.Add(person);\r\n                await _context.SaveChangesAsync();\r\n                return RedirectToAction(nameof(Index));\r\n            }\r\n            ViewData[\"EmployeId\"] = new SelectList(_context.Admin, \"Id\", \"Id\", person.EmployeId);\r\n            ViewData[\"EmployeId\"] = new SelectList(_context.Employe, \"Id\", \"Id\", person.EmployeId);\r\n            return View(person);\r\n        }\r\n\r\n        // GET: Auth/Edit/5\r\n        public async Task<IActionResult> Edit(int? id)\r\n        {\r\n            if (id == null || _context.Person == null)\r\n            {\r\n                return NotFound();\r\n            }\r\n\r\n            var person = await _context.Person.FindAsync(id);\r\n            if (person == null)\r\n            {\r\n                return NotFound();\r\n            }\r\n            ViewData[\"EmployeId\"] = new SelectList(_context.Admin, \"Id\", \"Id\", person.EmployeId);\r\n            ViewData[\"EmployeId\"] = new SelectList(_context.Employe, \"Id\", \"Id\", person.EmployeId);\r\n            return View(person);\r\n        }\r\n\r\n        // POST: Auth/Edit/5\r\n        // To protect from overposting attacks, enable the specific properties you want to bind to.\r\n        // For more details, see http://go.microsoft.com/fwlink/?LinkId=317598.\r\n        [HttpPost]\r\n        [ValidateAntiForgeryToken]\r\n        public async Task<IActionResult> Edit(int id, [Bind(\"Id,Nom,Prenom,Email,Password,EmployeId,AdminId\")] Person person)\r\n        {\r\n            if (id != person.Id)\r\n            {\r\n                return NotFound();\r\n            }\r\n\r\n            if (ModelState.IsValid)\r\n            {\r\n                try\r\n                {\r\n                    _context.Update(person);\r\n                    await _context.SaveChangesAsync();\r\n                }\r\n                catch (DbUpdateConcurrencyException)\r\n                {\r\n                    if (!PersonExists(person.Id))\r\n                    {\r\n                        return NotFound();\r\n                    }\r\n                    else\r\n                    {\r\n                        throw;\r\n                    }\r\n                }\r\n                return RedirectToAction(nameof(Index));\r\n            }\r\n            ViewData[\"EmployeId\"] = new SelectList(_context.Admin, \"Id\", \"Id\", person.EmployeId);\r\n            ViewData[\"EmployeId\"] = new SelectList(_context.Employe, \"Id\", \"Id\", person.EmployeId);\r\n            return View(person);\r\n        }\r\n\r\n        // GET: Auth/Delete/5\r\n        public async Task<IActionResult> Delete(int? id)\r\n        {\r\n            if (id == null || _context.Person == null)\r\n            {\r\n                return NotFound();\r\n            }\r\n\r\n            var person = await _context.Person\r\n                .Include(p => p.Admin)\r\n                .Include(p => p.Employe)\r\n                .FirstOrDefaultAsync(m => m.Id == id);\r\n            if (person == null)\r\n            {\r\n                return NotFound();\r\n            }\r\n\r\n            return View(person);\r\n        }\r\n\r\n        // POST: Auth/Delete/5\r\n        [HttpPost, ActionName(\"Delete\")]\r\n        [ValidateAntiForgeryToken]\r\n        public async Task<IActionResult> DeleteConfirmed(int id)\r\n        {\r\n            if (_context.Person == null)\r\n            {\r\n                return Problem(\"Entity set 'AppContext.Person'  is null.\");\r\n            }\r\n            var person = await _context.Person.FindAsync(id);\r\n            if (person != null)\r\n            {\r\n                _context.Person.Remove(person);\r\n            }\r\n\r\n            await _context.SaveChangesAsync();\r\n            return RedirectToAction(nameof(Index));\r\n        }\r\n\r\n        private bool PersonExists(int id)\r\n        {\r\n            return (_context.Person?.Any(e => e.Id == id)).GetValueOrDefault();\r\n        }\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Controllers/AuthController.cs b/Controllers/AuthController.cs
--- a/Controllers/AuthController.cs	(revision a4f29c34d6b81217cc7e201486359102b267c8d1)
+++ b/Controllers/AuthController.cs	(date 1653601316732)
@@ -41,7 +41,7 @@
                     ModelState.AddModelError("Password", "Wrong password!");
                     return View();
                 }
-                HttpContext.Session.SetInt32("PersonId", result.PersonId);
+                HttpContext.Session.SetInt32("PersonId", result.Person.Id);
                 HttpContext.Session.SetString("Nom", result.Person.Nom);
                 HttpContext.Session.SetString("Prenom", result.Person.Prenom);
                 HttpContext.Session.SetInt32("Admin", 1);
@@ -59,7 +59,7 @@
                 ModelState.AddModelError("Password", "Wrong password!");
                 return View();
             }
-            HttpContext.Session.SetInt32("PersonId", result1.PersonId);
+            HttpContext.Session.SetInt32("PersonId", result1.Person.Id);
             HttpContext.Session.SetString("Nom", result1.Person.Nom);
             HttpContext.Session.SetString("Prenom", result1.Person.Prenom);
             HttpContext.Session.SetInt32("Admin", 0);
Index: Views/Conges/Create.cshtml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>@model GestionEmploye.Models.Conge\r\n\r\n@{\r\n    ViewData[\"Title\"] = \"Create\";\r\n}\r\n\r\n<h1>Create</h1>\r\n\r\n<h4>Conge</h4>\r\n<hr />\r\n<div class=\"row\">\r\n    <div class=\"col-md-4\">\r\n        <form asp-action=\"Create\">\r\n            <div asp-validation-summary=\"ModelOnly\" class=\"text-danger\"></div>\r\n            <div class=\"form-group\">\r\n                <label asp-for=\"Date\" class=\"control-label\"></label>\r\n                <input asp-for=\"Date\" class=\"form-control\" />\r\n                <span asp-validation-for=\"Date\" class=\"text-danger\"></span>\r\n            </div>\r\n            <div class=\"form-group\">\r\n                <label asp-for=\"Duration\" class=\"control-label\"></label>\r\n                <input asp-for=\"Duration\" class=\"form-control\" />\r\n                <span asp-validation-for=\"Duration\" class=\"text-danger\"></span>\r\n            </div>\r\n            <div class=\"form-group\">\r\n                <label asp-for=\"Status\" class=\"control-label\"></label>\r\n                <input asp-for=\"Status\" class=\"form-control\" />\r\n                <span asp-validation-for=\"Status\" class=\"text-danger\"></span>\r\n            </div>\r\n            <div class=\"form-group\">\r\n                <label asp-for=\"EmployeId\" class=\"control-label\"></label>\r\n                <select asp-for=\"EmployeId\" class =\"form-control\" asp-items=\"ViewBag.EmployeId\"></select>\r\n            </div>\r\n            <div class=\"form-group\">\r\n                <input type=\"submit\" value=\"Create\" class=\"btn btn-primary\" />\r\n            </div>\r\n        </form>\r\n    </div>\r\n</div>\r\n\r\n<div>\r\n    <a asp-action=\"Index\">Back to List</a>\r\n</div>\r\n\r\n@section Scripts {\r\n    @{await Html.RenderPartialAsync(\"_ValidationScriptsPartial\");}\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Views/Conges/Create.cshtml b/Views/Conges/Create.cshtml
--- a/Views/Conges/Create.cshtml	(revision a4f29c34d6b81217cc7e201486359102b267c8d1)
+++ b/Views/Conges/Create.cshtml	(date 1653601316753)
@@ -4,9 +4,8 @@
     ViewData["Title"] = "Create";
 }
 
-<h1>Create</h1>
+<h1>Demander conge</h1>
 
-<h4>Conge</h4>
 <hr />
 <div class="row">
     <div class="col-md-4">
Index: Controllers/CongesController.cs
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>using System;\r\nusing System.Collections.Generic;\r\nusing System.Linq;\r\nusing System.Threading.Tasks;\r\nusing Microsoft.AspNetCore.Mvc;\r\nusing Microsoft.AspNetCore.Mvc.Rendering;\r\nusing Microsoft.EntityFrameworkCore;\r\nusing GestionEmploye.Models;\r\n\r\nnamespace GestionEmploye.Controllers\r\n{\r\n    public class CongesController : Controller\r\n    {\r\n        private readonly AppContext _context;\r\n\r\n        public CongesController(AppContext context)\r\n        {\r\n            _context = context;\r\n        }\r\n\r\n        public async Task<IActionResult> Index()\r\n        {\r\n            ViewData[\"Conges\"] = await _context.Conge.Include(c => c.Employe.Person).ToListAsync();\r\n            return View();\r\n        }\r\n\r\n        public IActionResult Create()\r\n        {\r\n            ViewData[\"EmployeId\"] = new SelectList(_context.Employe, \"Id\", \"Id\");\r\n            return View();\r\n        }\r\n\r\n        [HttpPost]\r\n        public async Task<IActionResult> Create([Bind(\"Id,Date,DemandeTime,Duration,Status,EmployeId\")] Conge conge)\r\n        {\r\n            if (ModelState.IsValid)\r\n            {\r\n                _context.Add(conge);\r\n                await _context.SaveChangesAsync();\r\n                return RedirectToAction(nameof(Index));\r\n            }\r\n            ViewData[\"EmployeId\"] = new SelectList(_context.Employe, \"Id\", \"Id\", conge.EmployeId);\r\n            return View(conge);\r\n        }\r\n\r\n\r\n        [HttpPost]\r\n        public async Task<IActionResult> Accept(int id){\r\n            var conge = await _context.Conge.FindAsync(id);\r\n            if (conge?.Status == \"Pending\"){\r\n                conge.Status = \"Accepted\";\r\n                _context.Update(conge);\r\n                await _context.SaveChangesAsync();\r\n            }\r\n            return RedirectToAction(nameof(Index));\r\n        }\r\n\r\n        [HttpPost]\r\n        public async Task<IActionResult> Decline(int id){\r\n            var conge = await _context.Conge.FindAsync(id);\r\n            if (conge.Status == \"Pending\"){\r\n                conge.Status = \"Declined\";\r\n                _context.Update(conge);\r\n                await _context.SaveChangesAsync();\r\n            }\r\n            return RedirectToAction(nameof(Index));\r\n        }\r\n\r\n        [HttpPost]\r\n        public async Task<IActionResult> Delete(int id)\r\n        {\r\n            var conge = await _context.Conge.FindAsync(id);\r\n            if (conge != null)\r\n            {\r\n                _context.Conge.Remove(conge);\r\n            }\r\n            \r\n            await _context.SaveChangesAsync();\r\n            return RedirectToAction(nameof(Index));\r\n        }\r\n\r\n        private bool CongeExists(int id)\r\n        {\r\n          return _context.Conge.Any(e => e.Id == id);\r\n        }\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Controllers/CongesController.cs b/Controllers/CongesController.cs
--- a/Controllers/CongesController.cs	(revision a4f29c34d6b81217cc7e201486359102b267c8d1)
+++ b/Controllers/CongesController.cs	(date 1653601316737)
@@ -52,7 +52,7 @@
                 _context.Update(conge);
                 await _context.SaveChangesAsync();
             }
-            return RedirectToAction(nameof(Index));
+            return Redirect(Request.Headers.Referer);
         }
 
         [HttpPost]
@@ -63,7 +63,7 @@
                 _context.Update(conge);
                 await _context.SaveChangesAsync();
             }
-            return RedirectToAction(nameof(Index));
+            return Redirect(Request.Headers.Referer);
         }
 
         [HttpPost]
@@ -76,7 +76,7 @@
             }
             
             await _context.SaveChangesAsync();
-            return RedirectToAction(nameof(Index));
+            return Redirect(Request.Headers.Referer);
         }
 
         private bool CongeExists(int id)
Index: Views/Conges/_Demande.cshtml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Views/Conges/_Demande.cshtml b/Views/Conges/_Demande.cshtml
new file mode 100644
--- /dev/null	(date 1653601316762)
+++ b/Views/Conges/_Demande.cshtml	(date 1653601316762)
@@ -0,0 +1,26 @@
+@model GestionEmploye.Models.Conge
+
+<h1>Demander conge</h1>
+
+<hr />
+<div class="row">
+    <form asp-action="Create" class="d-flex align-items-center justify-content-between gap-3">
+        <div asp-validation-summary="ModelOnly" class="text-danger"></div>
+        <label asp-for="Date" class="control-label"></label>
+        <input asp-for="Date" class="form-control" />
+        <span asp-validation-for="Date" class="text-danger"></span>
+        <label asp-for="Duration" class="control-label"></label>
+        <input asp-for="Duration" class="form-control" />
+        <span asp-validation-for="Duration" class="text-danger"></span>
+
+        <input type="submit" value="Demander" class="btn btn-primary" />
+    </form>
+    <div class="alert alert-warning mt-4 d-flex align-items-center justify-content-between">
+        <p class="m-0">Vous avez une demande en attente</p>
+        <button class="btn btn-outline-secondary">Annuler</button>
+    </div>
+</div>
+
+@section Scripts {
+@{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
+}
